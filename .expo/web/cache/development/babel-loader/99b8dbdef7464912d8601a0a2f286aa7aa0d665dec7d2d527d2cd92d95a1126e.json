{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport i18n from 'i18n-js';\nimport * as Localization from 'expo-localization';\nimport Storage from '@react-native-async-storage/async-storage';\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport translations from \"../constants/translations/\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var TranslationContext = React.createContext({});\nexport var TranslationProvider = function TranslationProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState('en'),\n    _useState2 = _slicedToArray(_useState, 2),\n    locale = _useState2[0],\n    setLocale = _useState2[1];\n  i18n.locale = locale;\n  i18n.translations = translations;\n  i18n.fallbacks = true;\n  var t = useCallback(function (scope, options) {\n    return i18n.t(scope, _objectSpread(_objectSpread({}, options), {}, {\n      locale: locale\n    }));\n  }, [locale]);\n  var getLocale = useCallback(_asyncToGenerator(function* () {\n    var localeJSON = yield Storage.getItem('locale');\n    setLocale(localeJSON !== null ? localeJSON : Localization.locale);\n  }), [setLocale]);\n  useEffect(function () {\n    getLocale();\n  }, [getLocale]);\n  useEffect(function () {\n    Storage.setItem('locale', locale);\n  }, [locale]);\n  var contextValue = {\n    t: t,\n    locale: locale,\n    setLocale: setLocale,\n    translate: t\n  };\n  return _jsx(TranslationContext.Provider, {\n    value: contextValue,\n    children: children\n  });\n};\nexport var useTranslation = function useTranslation() {\n  return useContext(TranslationContext);\n};","map":{"version":3,"names":["i18n","Localization","Storage","React","useCallback","useContext","useEffect","useState","translations","jsx","_jsx","TranslationContext","createContext","TranslationProvider","_ref","children","_useState","_useState2","_slicedToArray","locale","setLocale","fallbacks","t","scope","options","_objectSpread","getLocale","_asyncToGenerator","localeJSON","getItem","setItem","contextValue","translate","Provider","value","useTranslation"],"sources":["/Users/felipebassi/Documents/VAR-Labs-App/Behrend-Immersive-App/src/hooks/useTranslation.tsx"],"sourcesContent":["import i18n from 'i18n-js';\nimport * as Localization from 'expo-localization';\nimport Storage from '@react-native-async-storage/async-storage';\nimport React, {useCallback, useContext, useEffect, useState} from 'react';\n\nimport translations from '../constants/translations/';\nimport {ITranslate} from '../constants/types';\n\nexport const TranslationContext = React.createContext({});\n\nexport const TranslationProvider = ({\n  children,\n}: {\n  children: React.ReactNode;\n}) => {\n  const [locale, setLocale] = useState('en');\n\n  // Set the locale once at the beginning of your app.\n  i18n.locale = locale;\n  // Set the key-value pairs for the different languages you want to support.\n  i18n.translations = translations;\n  // When a value is missing from a language it'll fallback to another language with the key present.\n  i18n.fallbacks = true;\n\n  const t = useCallback(\n    (scope: i18n.Scope, options?: i18n.TranslateOptions) => {\n      return i18n.t(scope, {...options, locale});\n    },\n    [locale],\n  );\n\n  // get locale from storage\n  const getLocale = useCallback(async () => {\n    // get preferance gtom storage\n    const localeJSON = await Storage.getItem('locale');\n\n    // set Locale / compare if has updated\n    setLocale(localeJSON !== null ? localeJSON : Localization.locale);\n  }, [setLocale]);\n\n  useEffect(() => {\n    getLocale();\n  }, [getLocale]);\n\n  useEffect(() => {\n    // save preferance to storage\n    Storage.setItem('locale', locale);\n  }, [locale]);\n\n  const contextValue = {\n    t,\n    locale,\n    setLocale,\n    translate: t,\n  };\n\n  return (\n    <TranslationContext.Provider value={contextValue}>\n      {children}\n    </TranslationContext.Provider>\n  );\n};\n\nexport const useTranslation = () =>\n  useContext(TranslationContext) as ITranslate;\n"],"mappings":";;;;;AAAA,OAAOA,IAAI,MAAM,SAAS;AAC1B,OAAO,KAAKC,YAAY,MAAM,mBAAmB;AACjD,OAAOC,OAAO,MAAM,2CAA2C;AAC/D,OAAOC,KAAK,IAAGC,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAEzE,OAAOC,YAAY;AAAmC,SAAAC,GAAA,IAAAC,IAAA;AAGtD,OAAO,IAAMC,kBAAkB,GAAGR,KAAK,CAACS,aAAa,CAAC,CAAC,CAAC,CAAC;AAEzD,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAAC,IAAA,EAI1B;EAAA,IAHJC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAIR,IAAAC,SAAA,GAA4BT,QAAQ,CAAC,IAAI,CAAC;IAAAU,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAnCG,MAAM,GAAAF,UAAA;IAAEG,SAAS,GAAAH,UAAA;EAGxBjB,IAAI,CAACmB,MAAM,GAAGA,MAAM;EAEpBnB,IAAI,CAACQ,YAAY,GAAGA,YAAY;EAEhCR,IAAI,CAACqB,SAAS,GAAG,IAAI;EAErB,IAAMC,CAAC,GAAGlB,WAAW,CACnB,UAACmB,KAAiB,EAAEC,OAA+B,EAAK;IACtD,OAAOxB,IAAI,CAACsB,CAAC,CAACC,KAAK,EAAAE,aAAA,CAAAA,aAAA,KAAMD,OAAO;MAAEL,MAAM,EAANA;IAAM,EAAC,CAAC;EAC5C,CAAC,EACD,CAACA,MAAM,CACT,CAAC;EAGD,IAAMO,SAAS,GAAGtB,WAAW,CAAAuB,iBAAA,CAAC,aAAY;IAExC,IAAMC,UAAU,SAAS1B,OAAO,CAAC2B,OAAO,CAAC,QAAQ,CAAC;IAGlDT,SAAS,CAACQ,UAAU,KAAK,IAAI,GAAGA,UAAU,GAAG3B,YAAY,CAACkB,MAAM,CAAC;EACnE,CAAC,GAAE,CAACC,SAAS,CAAC,CAAC;EAEfd,SAAS,CAAC,YAAM;IACdoB,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EAEfpB,SAAS,CAAC,YAAM;IAEdJ,OAAO,CAAC4B,OAAO,CAAC,QAAQ,EAAEX,MAAM,CAAC;EACnC,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,IAAMY,YAAY,GAAG;IACnBT,CAAC,EAADA,CAAC;IACDH,MAAM,EAANA,MAAM;IACNC,SAAS,EAATA,SAAS;IACTY,SAAS,EAAEV;EACb,CAAC;EAED,OACEZ,IAAA,CAACC,kBAAkB,CAACsB,QAAQ;IAACC,KAAK,EAAEH,YAAa;IAAAhB,QAAA,EAC9CA;EAAQ,CACkB,CAAC;AAElC,CAAC;AAED,OAAO,IAAMoB,cAAc,GAAG,SAAjBA,cAAcA,CAAA;EAAA,OACzB9B,UAAU,CAACM,kBAAkB,CAAC;AAAA,CAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}